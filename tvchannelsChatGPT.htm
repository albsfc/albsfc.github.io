<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Channels</title>
    <style>
        /* Original styling (add more if needed) */
        h3 {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>TV Channels</h1>

    <!-- Channel placeholders -->
    <div class="channel" data-channel-name="Seven">
        <h3>Seven</h3>
        <video controls width="320">
            <source src="" type="application/vnd.apple.mpegurl">
        </video>
    </div>
    <div class="channel" data-channel-name="7two">
        <h3>7two</h3>
        <video controls width="320">
            <source src="" type="application/vnd.apple.mpegurl">
        </video>
    </div>
    <!-- Add more channels as needed -->

    <script>
        async function updateChannelLinks() {
            try {
                const response = await fetch('https://i.mjh.nz/au/Sydney/raw-tv.m3u8');
                const data = await response.text();
                const lines = data.split('\n');
                const channels = {};

                let currentChannelName = '';
                lines.forEach(line => {
                    if (line.startsWith('#EXTINF')) {
                        currentChannelName = line.split(',')[1].trim();
                    } else if (line.startsWith('http') && currentChannelName) {
                        channels[currentChannelName] = line;
                    }
                });

                document.querySelectorAll('.channel').forEach(channelElement => {
                    const channelName = channelElement.getAttribute('data-channel-name');
                    if (channels[channelName]) {
                        channelElement.querySelector('source').src = channels[channelName];
                        channelElement.querySelector('video').load();  // Reload video with new source
                    }
                });
            } catch (error) {
                console.error('Failed to update channels:', error);
            }
        }

        // Update channels on page load
        window.onload = updateChannelLinks;
    </script>
</body>
</html>
