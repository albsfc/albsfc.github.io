<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embedded Music Player</title>
    <style>
        /* ... CSS styles (unchanged) ... */
    </style>
</head>
<body>
    <div class="container">
        <h1 id="station-name">Radio Station Name</h1>
        <img id="station-logo" src="path_to_logo_image.png" alt="Radio Station Logo" onclick="toggleAudio()">
        <button id="back-btn" onclick="changeTrack(-1)">Back</button>
        <button id="forward-btn" onclick="changeTrack(1)">Forward</button>
        <marquee id="current-audio">Current Audio Title</marquee>
        <div class="grid" id="radio-grid">
            <!-- The dynamic radio channels will be added here using JavaScript -->
        </div>
    </div>
    <script>
        const radioGrid = document.getElementById('radio-grid');
        const stationName = document.getElementById('station-name');
        const stationLogo = document.getElementById('station-logo');
        const currentAudio = document.getElementById('current-audio');

        const m3u8URL = 'radiochans.m3u8';
        let currentTrackIndex = 0;
        let audioPlayer;

        // Fetch and display radio channels from the M3U8 file
        async function fetchRadioChannels() {
            try {
                const response = await fetch(m3u8URL);
                const data = await response.text();
                const lines = data.split('\n');

                for (let i = 0; i < lines.length; i += 2) {
                    const name = lines[i].trim();
                    const streamURL = lines[i + 1].trim();
                    const radioChannel = { name, streamURL };
                    displayRadioChannel(radioChannel);
                }
            } catch (error) {
                console.error('Error fetching radio channels:', error);
            }
        }

        // Display a radio channel in the grid
        function displayRadioChannel(channel) {
            const gridItem = document.createElement('div');
            gridItem.classList.add('grid-item');
            gridItem.innerHTML = `
                <img src="${channel.logoURL}" alt="${channel.name}" onclick="playChannel('${channel.name}', '${channel.streamURL}')">
                <p>${channel.name}</p>
            `;
            radioGrid.appendChild(gridItem);
        }

        // Play the selected radio channel
        function playChannel(name, streamURL) {
            stationName.innerText = name;
            stationLogo.src = 'path_to_logo_image.png'; // Replace with the actual path to the station logo
            stationLogo.alt = name;
            currentAudio.innerText = name;
            
            if (audioPlayer) {
                audioPlayer.pause();
                audioPlayer.src = streamURL;
            } else {
                audioPlayer = new Audio(streamURL);
            }

            audioPlayer.play();
        }

        // Function to toggle play/pause the audio player
        function toggleAudio() {
            if (audioPlayer) {
                if (audioPlayer.paused) audioPlayer.play();
                else audioPlayer.pause();
            }
        }

        // Function to change to the previous or next track in the list
        function changeTrack(direction) {
            // Implement this function based on your requirements
            // You'll need to update currentTrackIndex and play the corresponding track
            // Example: currentTrackIndex += direction;
            // playChannel(radioChannels[currentTrackIndex].name, radioChannels[currentTrackIndex].streamURL);
        }

        // Fetch and display radio channels on page load
        fetchRadioChannels();
    </script>
</body>
</html>
